#include <stdlib.h>
#include "Bitmaps.h"
#include "Tiles.h"

Bitmap* BITMAPS_PLAYER_DOWN;
Bitmap* BITMAPS_TILE;
Bitmap* BITMAPS_TREE_HALF;
Bitmap* BITMAPS_WOODEN_PLANK;

Bitmap* Bitmap_Create(Uint8 w, Uint8 h, Uint8 bmp[])
{
  Bitmap* b = malloc(sizeof(Bitmap));
  b->bitmap = malloc(w * h);
  b->w = w;
  b->h = h;

  const Uint8 width = w;

  while((h--) > 0)
  {
    while((w--) > 0)
      b->bitmap[w + h * width] = bmp[w + h * width];
    w = width;
  }
  return b;
}

void Bitmap_Destroy(Bitmap* b)
{
  free(b->bitmap);
  free(b);
}

void Bitmaps_CreateAll()
{
  BITMAPS_PLAYER_DOWN = Bitmap_Create
  (
    12 /* width */, 14, /* height */
    (Uint8[])
    {
      0,0,0,0,1,1,1,1,0,0,0,0,
      0,0,0,1,1,1,1,1,1,0,0,0,
      0,0,1,1,1,1,1,1,1,1,0,0,
      0,1,1,1,1,1,1,1,1,1,0,0,
      0,1,1,1,3,1,1,3,1,1,0,0,
      1,2,1,3,1,3,3,1,3,1,1,0,
      1,2,1,1,3,3,3,3,1,2,2,1,
      0,1,1,1,1,1,1,1,2,2,2,1,
      0,0,1,2,2,2,2,1,3,3,2,1,
      0,0,1,2,2,1,2,1,3,3,1,0,
      0,0,0,1,2,2,1,2,1,1,0,0,
      0,0,0,1,2,2,1,1,1,0,0,0,
      0,0,0,1,2,2,1,0,0,0,0,0,
      0,0,0,1,1,1,1,0,0,0,0,0,
    }
  );

  BITMAPS_TILE = Bitmap_Create
  (
    TILE_SIZE /* width */, TILE_SIZE, /* height */
    (Uint8[])
    {
      1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
      1,2,1,1,1,1,1,1,1,1,1,1,1,1,2,1,
      1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
      1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
      1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
      1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,
      1,2,1,1,1,2,1,1,1,1,1,1,1,1,1,1,
      1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
      1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
      1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
      1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
      1,1,1,1,1,2,1,1,1,1,1,2,1,1,1,1,
      1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
      1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
      1,1,1,1,2,1,1,1,1,1,1,1,1,1,2,1,
      1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,
    }
  );

  BITMAPS_TREE_HALF = Bitmap_Create
  (
    8 /* width */, TILE_SIZE, /* height */
    (Uint8[])
    {
      0,0,0,0,0,0,1,1,
      0,0,0,0,1,1,2,2,
      0,0,0,1,2,2,2,2,
      0,0,1,2,2,2,2,2,
      0,0,1,2,2,2,2,2,
      0,1,2,2,2,2,2,2,
      0,1,2,2,2,2,2,2,
      0,1,2,2,2,2,2,2,
      0,1,2,2,2,2,2,2,
      1,2,2,2,2,2,2,2,
      1,2,1,2,2,2,2,2,
      0,1,0,1,2,2,1,2,
      0,0,0,0,1,1,3,1,
      0,0,0,0,1,3,3,3,
      0,0,0,0,1,3,3,3,
      0,0,0,0,0,1,1,1,
    }
  );
}


void Bitmaps_DestroyAll()
{
  Bitmap_Destroy(BITMAPS_PLAYER_DOWN);
  Bitmap_Destroy(BITMAPS_TILE);
}
